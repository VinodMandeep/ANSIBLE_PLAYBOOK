currentBuild.displayName="testingMVC"+currentBuild.number

pipeline
{
    agent { label 'master' }
    
    	environment {
		
		DOCKER_TAG = get_version()
		
		
	}

	stages
	{

			stage("clone")
			{
			steps
				{
				    echo "-------------------->starting to checkout the project <----------------------"
				git credentialsId: 'vinodgit', url: 'https://github.com/VinodMandeep/ANSIBLE_PLAYBOOK.git/'
				echo "--------------------> ${DOCKER_TAG} <----------------------"
				 echo "-------------------->done <----------------------"

				}
				
			
			}
			
	               stage("docker build")
			{
			  steps
				{				 
				echo "copy docker file from jenkins container to another macine and run the below command"
				echo "docker image build -t vinodshetty1990/myapp:${DOCKER_TAG}"
				echo "after that deply this to kubernetes"
				}				
			
			}


    }

}

def get_version() {
commitId = sh returnStdout: true, script: 'git rev-parse HEAD'
return commitId
}


